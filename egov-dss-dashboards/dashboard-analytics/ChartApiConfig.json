{
  "todaysVisits": {
    "chartName": "DSS_HEALTH_NATIONAL_HOUSEHOLDS_VISITED_TODAY",
    "queries": [
      {
        "module": "COMMON",
        "dateRefField": "",
        "requestQueryMap": "",
        "indexName": "project-task-index-v1",
        "aggrQuery": "{\"aggs\": {\"Todays visits\":{\"filter\":{\"bool\":{\"must\":[{\"term\":{\"deliveredTo\":\"HOUSEHOLD\"}},{\"term\": {\"productVariant\": \"LLIN\"}},{\"range\":{\"createdTime\":{\"gte\":\"now/d\"}}}]}},\"aggs\":{\"Count\":{\"value_count\":{\"field\":\"id\"}}}}}}"
      }
    ],
    "chartType": "metric",
    "valueType": "number",
    "drillChart": "none",
    "documentType": "_doc",
    "action": "",
    "aggregationPaths": [
      "Todays visits"
    ],
    "insight": {
      "chartResponseMap": "todaysVisits",
      "action": "differenceOfNumbers",
      "upwardIndicator": "positive",
      "downwardIndicator": "negative",
      "textMessage": "$indicator$value% than last $insightInterval",
      "colorCode": "#228B22",
      "insightInterval": "day"
    },
    "_comment": " "
  },
  "totalVisits": {
    "chartName": "DSS_HEALTH_NATIONAL_TOTAL_HOUSEHOLD_VISITS",
    "queries": [
      {
        "module": "COMMON",
        "dateRefField": "",
        "requestQueryMap": "",
        "indexName": "project-task-index-v1",
        "aggrQuery": "{\"aggs\":{\"Total visits\":{\"filter\":{\"bool\":{\"must\":[{\"term\":{\"deliveredTo\":\"HOUSEHOLD\"}},{\"term\": {\"productVariant\": \"LLIN\"}},{\"range\":{\"createdTime\":{\"lte\":\"now\"}}}]}},\"aggs\":{\"Count\":{\"value_count\":{\"field\":\"id\"}}}}}}"
      }
    ],
    "chartType": "metric",
    "valueType": "number",
    "drillChart": "none",
    "documentType": "_doc",
    "action": "",
    "aggregationPaths": [
      "Total visits"
    ],
    "insight": {
    },
    "_comment": " "
  },
  "populationCoveredToday": {
    "chartName": "DSS_HEALTH_NATIONAL_POPULATION_COVERED_TODAY",
    "queries": [
      {
        "module": "COMMON",
        "dateRefField": "",
        "requestQueryMap": "",
        "indexName": "project-task-index-v1",
        "aggrQuery": "{\n  \"aggs\": {\n    \"AGGR\": {\n      \"filters\": {\n        \"filters\": {\n          \"Household\": {\n            \"bool\": {\n              \"must\":[\n            {\n              \"term\": {\n                \"deliveredTo\": \"HOUSEHOLD\"\n              }\n            },\n            {\n              \"term\": {\n                \"productVariant\": \"LLIN\"\n              }\n            },\n            {\n              \"range\" : {\n                \"createdTime\" : {\n                  \"gte\": \"now/d\"\n                }\n              }\n            }\n            ]\n            }\n          }\n        }\n      }, \n      \"aggs\": {\n        \"SUM\": {\n          \"sum\": {\n            \"field\": \"quantity\"\n          }\n        },\n        \"Population Covered Today\": {\n          \"bucket_script\": {\n            \"buckets_path\": {\n              \"sum\": \"SUM\"\n            },\n            \"script\": \"(params.sum) * 1.8\"\n          }\n        }\n      }\n    }\n  }\n}"
      }
    ],
    "chartType": "metric",
    "valueType": "number",
    "drillChart": "none",
    "documentType": "_doc",
    "action": "",
    "aggregationPaths": [
      "Population Covered Today"
    ],
    "insight": {
      "chartResponseMap": "populationCoveredToday",
      "action": "differenceOfNumbers",
      "upwardIndicator": "positive",
      "downwardIndicator": "negative",
      "textMessage": "$indicator$value% than last $insightInterval",
      "colorCode": "#228B22",
      "insightInterval": "day"
    },
    "_comment": " "
  },
  "totalPopulationCovered": {
    "chartName": "DSS_HEALTH_NATIONAL_TOTAL_POPULATION_COVERED",
    "queries": [
      {
        "module": "COMMON",
        "dateRefField": "",
        "requestQueryMap": "",
        "indexName": "project-task-index-v1",
        "aggrQuery": "{\n  \"aggs\": {\n    \"AGGR\": {\n      \"filters\": {\n        \"filters\": {\n          \"Household\": {\n            \"bool\": {\n              \"must\":[\n            {\n              \"term\": {\n                \"deliveredTo\": \"HOUSEHOLD\"\n              }\n            },\n            {\n              \"term\": {\n                \"productVariant\": \"LLIN\"\n              }\n            },\n            {\n              \"range\" : {\n                \"createdTime\" : {\n                  \"lte\": \"now\"\n                }\n              }\n            }\n            ]\n            }\n          }\n        }\n      }, \n      \"aggs\": {\n        \"SUM\": {\n          \"sum\": {\n            \"field\": \"quantity\"\n          }\n        },\n        \"Total Population Covered\": {\n          \"bucket_script\": {\n            \"buckets_path\": {\n              \"sum\": \"SUM\"\n            },\n            \"script\": \"(params.sum) * 1.8\"\n          }\n        }\n      }\n    }\n  }\n}"
      }
    ],
    "chartType": "metric",
    "valueType": "number",
    "drillChart": "none",
    "documentType": "_doc",
    "action": "",
    "aggregationPaths": [
      "Total Population Covered"
    ],
    "insight": {},
    "_comment": " "
  },
  "todayDistributions": {
    "chartName": "DSS_HEALTH_NATIONAL_BED_NETS_DISTRIBUTED_TODAY",
    "queries": [
      {
        "module": "COMMON",
        "dateRefField": "",
        "requestQueryMap": "",
        "indexName": "project-task-index-v1",
        "aggrQuery": "{\n  \"aggs\": {\n    \"Today Distributions\": {\n      \"filter\": {\n        \"bool\": {\n          \"must\": [\n            {\n              \"term\": {\n                \"deliveredTo\": \"HOUSEHOLD\"\n              }\n            },\n            {\n              \"term\": {\n                \"productVariant\": \"LLIN\"\n              }\n            },\n            {\n              \"range\": {\n                \"createdTime\": {\n                  \"gte\": \"now/d\"\n                }\n              }\n            }\n          ]\n        }\n      },\n      \"aggs\": {\n        \"distributions\": {\n          \"sum\": {\n            \"field\": \"quantity\"\n          }\n        }\n      }\n    }\n  }\n}"
      }
    ],
    "chartType": "metric",
    "valueType": "number",
    "drillChart": "none",
    "documentType": "_doc",
    "action": "",
    "aggregationPaths": [
      "Today Distributions"
    ],
    "insight": {
      "chartResponseMap": "todayDistributions",
      "action": "differenceOfNumbers",
      "upwardIndicator": "positive",
      "downwardIndicator": "negative",
      "textMessage": "$indicator$value% than last $insightInterval",
      "colorCode": "#228B22",
      "insightInterval": "day"
    },
    "_comment": " "
  },
  "totalDistributions": {
    "chartName": "DSS_HEALTH_NATIONAL_BED_NETS_DISTRIBUTED_TOTAL",
    "queries": [
      {
        "module": "COMMON",
        "dateRefField": "",
        "requestQueryMap": "",
        "indexName": "project-task-index-v1",
        "aggrQuery": "{\n  \"aggs\": {\n    \"Total Distributions\": {\n      \"filter\": {\n        \"bool\": {\n          \"must\": [\n            {\n              \"term\": {\n                \"deliveredTo\": \"HOUSEHOLD\"\n              }\n            },\n            {\n              \"term\": {\n                \"productVariant\": \"LLIN\"\n              }\n            },\n            {\n              \"range\": {\n                \"createdTime\": {\n                  \"lte\" : \"now\"                }\n              }\n            }\n          ]\n        }\n      },\n      \"aggs\": {\n        \"distributions\": {\n          \"sum\": {\n            \"field\": \"quantity\"\n          }\n        }\n      }\n    }\n  }\n}"
      }
    ],
    "chartType": "metric",
    "valueType": "number",
    "drillChart": "none",
    "documentType": "_doc",
    "action": "",
    "aggregationPaths": [
      "Total Distributions"
    ],
    "insight": {
    },
    "_comment": " "
  },
  "distributionsByRange": {
    "chartName": "DSS_HEALTH_NATIONAL_BED_NETS_DISTRIBUTED",
    "queries": [
      {
        "module": "COMMON",
        "dateRefField": "createdTime",
        "requestQueryMap": "{\"province\":\"province\",\"district\":\"district\"}",
        "indexName": "project-task-index-v1",
        "aggrQuery": "{\n  \"aggs\": {\n    \"Distributions By Range\": {\n      \"filter\": {\n        \"bool\": {\n          \"must\": [\n            {\n              \"term\": {\n                \"deliveredTo\": \"HOUSEHOLD\"\n              }\n            },\n            {\n              \"term\": {\n                \"productVariant\": \"LLIN\"\n              }\n            }\n          ]\n        }\n      },\n      \"aggs\": {\n        \"quantity\": {\n          \"sum\": {\n            \"field\": \"quantity\"\n          }\n        }\n      }\n    }\n  }\n}"
      }
    ],
    "chartType": "metric",
    "valueType": "number",
    "drillChart": "none",
    "documentType": "_doc",
    "action": "",
    "aggregationPaths": [
      "Distributions By Range"
    ],
    "insight": {
      "chartResponseMap": "distributionsByRange",
      "action": "differenceOfNumbers",
      "upwardIndicator": "positive",
      "downwardIndicator": "negative",
      "textMessage": "$indicator$value% than last $insightInterval",
      "colorCode": "#228B22",
      "insightInterval": "day"
    },
    "_comment": " "
  },
  "totalDistributionsTillToday": {
    "chartName": "DSS_HEALTH_NATIONAL_TOTAL_BED_NETS_DISTRIBUTED_TILL_TODAY",
    "queries": [
      {
        "module": "COMMON",
        "dateRefField": "",
        "requestQueryMap": "{\"province\":\"province\",\"district\":\"district\"}",
        "indexName": "project-task-index-v1",
        "aggrQuery": "{\n  \"aggs\": {\n    \"Total Distributions\": {\n      \"filter\": {\n        \"bool\": {\n          \"must\": [\n            {\n              \"term\": {\n                \"deliveredTo\": \"HOUSEHOLD\"\n              }\n            },\n            {\n              \"term\": {\n                \"productVariant\": \"LLIN\"\n              }\n            },\n            {\n              \"range\": {\n                \"createdTime\": {\n                  \"lte\" : \"now\"                }\n              }\n            }\n          ]\n        }\n      },\n      \"aggs\": {\n        \"distributions\": {\n          \"sum\": {\n            \"field\": \"quantity\"\n          }\n        }\n      }\n    }\n  }\n}"
      }
    ],
    "chartType": "metric",
    "valueType": "number",
    "drillChart": "none",
    "documentType": "_doc",
    "action": "",
    "aggregationPaths": [
      "Total Distributions"
    ],
    "insight": {
    },
    "_comment": " "
  },
  "bednetsTarget": {
    "chartName": "DSS_HEALTH_NATIONAL_BED_NETS_TARGET",
    "queries": [
      {
        "module": "COMMON",
        "dateRefField": "",
        "requestQueryMap": "{\"province\":\"province\",\"district\":\"district\"}",
        "indexName": "micro-plan-index-v1",
        "aggrQuery": "{\n    \"aggs\":{\n        \"Bednets Target\":{\n          \"filters\":{\n            \"filters\": {\n              \"nets\":{\n                \"bool\":{\n                  \"must\": [\n                      {\n                        \"term\": {\n                            \"productVariant\": \"LLIN\"\n                        }\n                      },\n                      {\n                        \"term\": {\n                            \"targetType\": \"BEDNETS\"\n                        }\n                      }\n                    ]\n                }\n              }\n              \n            }\n            \n          },\n          \"aggs\":{\n            \"Target\": {\n              \"sum\":{\n                  \"field\": \"targetPerDay\"\n              }\n            },\n            \"Target by Range\": {\n              \"bucket_script\": {\n                \"buckets_path\": {\n                  \"target\": \"Target\"\n                },\n                \"script\": \"(params.target) * 365\"\n              }\n            }\n          }\n        }\n        \n    }\n}"
      }
    ],
    "chartType": "metric",
    "postAggregationTheory" : "repsonseToDifferenceOfDates",
    "valueType": "number",
    "drillChart": "none",
    "documentType": "_doc",
    "action": "",
    "aggregationPaths": [
      "Target by Range"
    ],
    "insight": {
    },
    "_comment": " "
  },
  "bednetsDistributionCoverage": {
    "chartName": "DSS_HEALTH_NATIONAL_BED_NETS_COVERAGE",
    "queries": [
      {
        "module": "COMMON",
        "dateRefField": "",
        "requestQueryMap": "{\"province\":\"province\",\"district\":\"district\"}",
        "indexName": "micro-plan-index-v1",
        "aggrQuery": "{\n    \"aggs\":{\n        \"Bednets Target\":{\n          \"filter\":{\n            \"bool\":{\n              \"must\": [\n                  {\n                    \"term\": {\n                        \"productVariant\": \"LLIN\"\n                    }\n                  },\n                  {\n                    \"term\": {\n                        \"targetType\": \"BEDNETS\"\n                    }\n                  }\n                ]\n            }\n          },\n          \"aggs\":{\n            \"target\": {\n              \"sum\":{\n                  \"field\": \"overallTarget\"\n              }\n            }\n          }\n        }\n        \n    }\n}"
      },
      {
        "module": "COMMON",
        "dateRefField": "",
        "requestQueryMap": "{\"province\":\"province\",\"district\":\"district\"}",
        "indexName": "project-task-index-v1",
        "aggrQuery": "{\n  \"aggs\": {\n    \"Total Distributions Coverage\": {\n      \"filter\": {\n        \"bool\": {\n          \"must\": [\n            {\n              \"term\": {\n                \"deliveredTo\": \"HOUSEHOLD\"\n              }\n            },\n            {\n              \"term\": {\n                \"productVariant\": \"LLIN\"\n              }\n            },\n            {\n              \"range\": {\n                \"createdTime\": {\n                  \"lte\" : \"now\"                }\n              }\n            }\n          ]\n        }\n      },\n      \"aggs\": {\n        \"distributions\": {\n          \"sum\": {\n            \"field\": \"quantity\"\n          }\n        }\n      }\n    }\n  }\n}"
      }
    ],
    "chartType": "metric",
    "valueType": "percentage",
    "drillChart": "none",
    "documentType": "_doc",
    "action": "percentage",
    "aggregationPaths": [
      "Total Distributions Coverage",
      "Bednets Target"
    ],
    "insight": {
    },
    "_comment": " "
  }
}

