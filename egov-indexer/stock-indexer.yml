ServiceMaps:
  serviceName: stock
  version: 1.0.0
  mappings:
    - topic: update-stock-topic
      configKey: INDEX
      indexes:
        - name: stockUpdateIndex-v1
          type: stock-update
          id: $.*.id
          isBulk: true
          jsonPath: $.*
          timeStampField: $.*.auditDetails.createdTime
    - topic: save-stock-topic
      configKey: INDEX
      indexes:
        - name: stockIndex-v1
          type: stock
          id: $.*.id
          isBulk: true
          jsonPath: $.*
          timeStampField: $.auditDetails.lastModifiedTime
    - topic: delete-stock-topic
      configKey: INDEX
      indexes:
        - name: stockDeleteIndex-v1
          type: stock-delete
          id: $.*.id
          isBulk: true
          jsonPath: $.*
          timeStampField: $.auditDetails.lastModifiedTime

    - topic: update-stock-reconciliation-topic
      configKey: INDEX
      indexes:
        - name: stockReconciliationUpdateIndex-v1
          type: stock-reconciliation-update
          id: $.*.id
          isBulk: true
          jsonPath: $.*
          timeStampField: $.*.auditDetails.createdTime
    - topic: save-stock-reconciliation-topic
      configKey: INDEX
      indexes:
        - name: stockReconciliationIndex-v1
          type: stock-reconciliation
          id: $.*.id
          isBulk: true
          jsonPath: $.*
          timeStampField: $.auditDetails.lastModifiedTime
    - topic: delete-stock-reconciliation-topic
      configKey: INDEX
      indexes:
        - name: stockReconciliationDeleteIndex-v1
          type: stock-reconciliation-delete
          id: $.*.id
          isBulk: true
          jsonPath: $.*
          timeStampField: $.auditDetails.lastModifiedTime
    - topic: transformer-producer-bulk-stock-index-v1-topic
      configKey: INDEX
      indexes:
        - name: stock-index-v1
          type: stock
          id: $.id
          isBulk: true
          jsonPath: $
          customJsonMapping:
            indexMapping: { "Data": { } }
            fieldMapping:
              - inJsonPath: $
                outJsonPath: $.Data
          timeStampField: $.lastModifiedTime
        - name: user-sync-index-v1
          type: users
          id: $.id
          isBulk: true
          jsonPath: $
          customJsonMapping:
            indexMapping: { "Data": { } }
            fieldMapping:
              - inJsonPath: $.lastModifiedBy
                outJsonPath: $.Data.userId
              - inJsonPath: $.lastModifiedTime
                outJsonPath: $.Data.createdTime
              - inJsonPath: $.productVariant
                outJsonPath: $.Data.productVariant
              - inJsonPath: $.physicalCount
                outJsonPath: $.Data.physicalCount
              - inJsonPath: $.eventType
                outJsonPath: $.Data.eventType
              - inJsonPath: $.eventTimeStamp
                outJsonPath: $.Data.eventTimeStamp
              - inJsonPath: $.province
                outJsonPath: $.Data.province
              - inJsonPath: $.district
                outJsonPath: $.Data.district
              - inJsonPath: $.administrativeProvince
                outJsonPath: $.Data.administrativeProvince
              - inJsonPath: $.locality
                outJsonPath: $.Data.locality
              - inJsonPath: $.village
                outJsonPath: $.Data.village
              - inJsonPath: $.latitude
                outJsonPath: $.Data.latitude
              - inJsonPath: $.longitude
                outJsonPath: $.Data.longitude

          timeStampField: $.lastModifiedTime